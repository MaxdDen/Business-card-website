[tool:pytest]
# Конфигурация pytest для CMS проекта

# Директории для поиска тестов
testpaths = tests

# Паттерны для поиска тестовых файлов
python_files = test_*.py *_test.py

# Паттерны для поиска тестовых классов и функций
python_classes = Test*
python_functions = test_*

# Минимальная версия Python
minversion = 3.12

# Добавляем текущую директорию в sys.path
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --color=yes
    --durations=10
    --maxfail=5
    --disable-warnings
    -ra

# Маркеры для категоризации тестов
markers =
    unit: Юнит-тесты для отдельных компонентов
    integration: Интеграционные тесты для взаимодействия компонентов
    auth: Тесты аутентификации и авторизации
    crud: Тесты CRUD операций
    performance: Тесты производительности
    security: Тесты безопасности
    slow: Медленные тесты (требуют больше времени)
    network: Тесты, требующие сетевого подключения
    database: Тесты, работающие с базой данных
    cache: Тесты кэширования
    validation: Тесты валидации данных
    images: Тесты работы с изображениями
    seo: Тесты SEO функциональности
    texts: Тесты работы с текстами
    lighthouse: Тесты производительности Lighthouse

# Фильтры предупреждений
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:requests.*

# Настройки для покрытия кода (если используется pytest-cov)
# addopts = --cov=app --cov-report=html --cov-report=term-missing

# Настройки для параллельного выполнения (если используется pytest-xdist)
# addopts = -n auto

# Настройки для профилирования (если используется pytest-profiling)
# addopts = --profile

# Настройки для отчетов (если используется pytest-html)
# addopts = --html=reports/report.html --self-contained-html

# Настройки для JUnit XML (для CI/CD)
# addopts = --junitxml=reports/junit.xml

# Настройки для логирования
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Настройки для файлов логов
log_file = logs/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d %(funcName)s(): %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Настройки для тестовых данных
test_data_dir = tests/data

# Настройки для временных файлов
tmp_path = tests/tmp

# Настройки для фикстур
fixture_scope = function

# Настройки для параметризации
parametrize_plus = true

# Настройки для моков
mock_autospec = true

# Настройки для изоляции тестов
isolate = true

# Настройки для очистки после тестов
cleanup = true
